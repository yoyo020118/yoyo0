<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø¬ÙˆØ¬Ù„</title>
    <style>
        body { font-family: sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh; background: #f4f4f4; margin: 0; }
        .box { background: white; padding: 40px; border-radius: 10px; text-align: center; box-shadow: 0 5px 15px rgba(0,0,0,0.1); width: 300px; }
        .hidden { display: none; }
        button { background: #4285F4; color: white; border: none; padding: 10px 20px; font-size: 16px; cursor: pointer; border-radius: 5px; width: 100%; }
        button:hover { background: #357ae8; }
        img { width: 80px; height: 80px; border-radius: 50%; margin-bottom: 15px; }
        h3 { margin: 10px 0 5px; }
        p { color: #666; font-size: 14px; }
        .error { color: red; font-size: 12px; margin-top: 10px; border: 1px solid red; padding: 5px; display: none; background: #ffe6e6;}
    </style>
</head>
<body>

    <!-- ÙˆØ§Ø¬Ù‡Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
    <div id="login-view" class="box">
        <h2>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h2>
        <button onclick="signIn()">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ø­Ø³Ø§Ø¨ Ø¬ÙˆØ¬Ù„</button>
        <div id="error-msg" class="error"></div>
    </div>

    <!-- ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ø¹Ø¯ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
    <div id="user-view" class="box hidden">
        <img id="p-img" src="" alt="ØµÙˆØ±Ø©">
        <h3 id="p-name">Ø§Ù„Ø§Ø³Ù…</h3>
        <p id="p-email">Ø§Ù„Ø§ÙŠÙ…ÙŠÙ„</p>
        <button onclick="logOut()" style="background: #555; margin-top: 10px;">Ø®Ø±ÙˆØ¬</button>
    </div>

    <!-- Ù…ÙƒØªØ¨Ø§Øª Firebase -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>

    <script>
        // ======================================================
        // ðŸ”´ðŸ”´ Ù‡Ø§Ù… Ø¬Ø¯Ø§Ù‹: Ø§Ù†Ø³Ø® Ø§Ù„Ù€ Config Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ ÙˆØ¶Ø¹Ù‡ Ù‡Ù†Ø§ ðŸ”´ðŸ”´
        // ======================================================
        
        const firebaseConfig = {
            apiKey: "AIzaSy.......Ø§Ù†Ø³Ø®_Ø§Ù„ÙƒÙˆØ¯_Ø§Ù„Ø®Ø§Øµ_Ø¨Ùƒ_Ù…Ù†_ÙØ§ÙŠØ±Ø¨ÙŠØ³_ÙˆØ¶Ø¹Ù‡_Ù‡Ù†Ø§.......",
            authDomain: "xxxxxx.firebaseapp.com",
            projectId: "xxxxxx",
            storageBucket: "xxxxxx.appspot.com",
            messagingSenderId: "xxxxxx",
            appId: "xxxxxx"
        };
        
        // ======================================================

        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
        if (!firebase.apps.length) {
            try {
                firebase.initializeApp(firebaseConfig);
            } catch (e) {
                document.getElementById('error-msg').innerText = "Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª: ØªØ£ÙƒØ¯ Ù…Ù† ÙˆØ¶Ø¹ Ø§Ù„Ù€ Config Ø§Ù„ØµØ­ÙŠØ­!";
                document.getElementById('error-msg').style.display = 'block';
            }
        }
        const auth = firebase.auth();

        // Ø²Ø± Ø§Ù„Ø¯Ø®ÙˆÙ„
        function signIn() {
            const provider = new firebase.auth.GoogleAuthProvider();
            auth.signInWithPopup(provider).catch((error) => {
                const errorDiv = document.getElementById('error-msg');
                errorDiv.style.display = 'block';
                // ØªØ±Ø¬Ù…Ø© Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ù„Ù„Ø¹Ø±Ø¨ÙŠØ©
                if(error.code === 'auth/api-key-not-valid') {
                    errorDiv.innerText = "Ø®Ø·Ø£: Ù…ÙØªØ§Ø­ API ØºÙŠØ± ØµØ­ÙŠØ­. Ø§Ù†Ø³Ø® Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.";
                } else if (error.code === 'auth/unauthorized-domain') {
                    errorDiv.innerText = "Ø®Ø·Ø£: Ù‡Ø°Ø§ Ø§Ù„Ø±Ø§Ø¨Ø· ØºÙŠØ± Ù…ØµØ±Ø­ Ù„Ù‡ (Domain Error). Ø§Ø°Ù‡Ø¨ Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ÙØ§ÙŠØ±Ø¨ÙŠØ³ ÙˆØ£Ø¶Ù Ø§Ù„Ø±Ø§Ø¨Ø·.";
                } else {
                    errorDiv.innerText = error.message;
                }
            });
        }

        // Ø²Ø± Ø§Ù„Ø®Ø±ÙˆØ¬
        function logOut() {
            auth.signOut();
        }

        // Ù…Ø±Ø§Ù‚Ø¨ Ø§Ù„Ø­Ø§Ù„Ø© (ÙŠØ­ÙØ¸ Ø§Ù„Ø¯Ø®ÙˆÙ„ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹)
        auth.onAuthStateChanged((user) => {
            if (user) {
                // Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø³Ø¬Ù„
                document.getElementById('login-view').classList.add('hidden');
                document.getElementById('user-view').classList.remove('hidden');
                
                // Ø¹Ø±Ø¶ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                document.getElementById('p-name').innerText = user.displayName;
                document.getElementById('p-email').innerText = user.email;
                document.getElementById('p-img').src = user.photoURL;
            } else {
                // Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…Ø³Ø¬Ù„
                document.getElementById('login-view').classList.remove('hidden');
                document.getElementById('user-view').classList.add('hidden');
            }
        });
    </script>
</body>
</html>
