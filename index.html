<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YOYO Games Network</title>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* --- Ø§Ù„Ø£Ù„ÙˆØ§Ù† ÙˆØ§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ø¹Ø§Ù… --- */
        :root {
            --bg-main: #1e1e2e;
            --primary: #f9ca24;
            --secondary: #6c5ce7;
            --accent: #eb4d4b;
            --text: #ffffff;
            --card: #2d3436;
            --admin-green: #00ff00;
        }

        body {
            font-family: 'Tajawal', sans-serif;
            background-color: var(--bg-main);
            color: var(--text);
            margin: 0;
            padding: 0;
            user-select: none;
            overflow-x: hidden;
            padding-bottom: 80px; /* Ù…Ø³Ø§Ø­Ø© Ù„Ù„Ø²Ø± Ø§Ù„Ø¹Ø§Ø¦Ù… */
        }

        button { font-family: 'Tajawal', sans-serif; cursor: pointer; transition: 0.3s; }
        button:active { transform: scale(0.95); }

        /* --- Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ù„ÙˆÙŠ --- */
        .header {
            background: rgba(0,0,0,0.9);
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 3px solid var(--secondary);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .user-badge {
            background: #333;
            padding: 5px 15px;
            border-radius: 20px;
            border: 1px solid var(--primary);
            font-size: 14px;
        }

        #my-id { color: var(--primary); font-weight: bold; cursor: copy; }

        .menu-icon {
            font-size: 24px;
            background: none;
            border: none;
            color: white;
            cursor: pointer;
        }

        /* --- Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© --- */
        .sidebar {
            position: fixed;
            top: 0; right: -260px;
            width: 260px;
            height: 100%;
            background: var(--card);
            box-shadow: -5px 0 15px rgba(0,0,0,0.5);
            transition: 0.4s;
            z-index: 200;
            padding-top: 60px;
            display: flex;
            flex-direction: column;
        }
        .sidebar.active { right: 0; }
        
        .nav-btn {
            background: transparent;
            border: none;
            color: white;
            padding: 15px 20px;
            text-align: right;
            border-bottom: 1px solid #444;
            font-size: 18px;
        }
        .nav-btn:hover { background: var(--secondary); padding-right: 30px; }

        /* --- Ø§Ù„ØµÙØ­Ø§Øª --- */
        .page {
            display: none;
            padding: 20px;
            max-width: 800px;
            margin: 0 auto;
            animation: slideUp 0.5s ease;
        }
        .page.show { display: block; }
        @keyframes slideUp { from {opacity:0; transform:translateY(20px);} to {opacity:1; transform:translateY(0);} }

        /* --- ØªØµÙ…ÙŠÙ… Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ --- */
        .games-wrapper {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
        }
        .game-card {
            background: var(--card);
            border-radius: 15px;
            padding: 20px;
            position: relative;
            border: 2px solid transparent;
        }
        .game-card:hover { border-color: var(--secondary); }
        
        .info-btn {
            position: absolute;
            top: 10px; left: 10px;
            width: 30px; height: 30px;
            background: var(--primary);
            color: black;
            border-radius: 50%;
            font-weight: bold;
            display: flex; justify-content: center; align-items: center;
            box-shadow: 0 0 10px var(--primary);
            cursor: pointer;
            z-index: 10;
        }

        .play-btn {
            width: 100%;
            padding: 10px;
            background: var(--secondary);
            color: white;
            border: none;
            border-radius: 8px;
            margin-top: 15px;
            font-weight: bold;
        }

        /* --- Ø§Ù„Ø­Ø³Ø§Ø¨ --- */
        .account-details {
            display: none;
            background: #000;
            border: 2px dashed var(--accent);
            padding: 20px;
            position: relative;
        }
        .anti-screenshot {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: repeating-linear-gradient(45deg, rgba(255,255,255,0.05) 0px, transparent 10px);
            display: flex; justify-content: center; align-items: center;
            font-size: 30px; color: rgba(255,0,0,0.2);
            transform: rotate(-20deg);
            pointer-events: none;
        }

        /* --- Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª --- */
        .ad-item {
            background: var(--card);
            margin: 10px 0;
            padding: 15px;
            border-radius: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-right: 5px solid var(--primary);
        }
        .watch-btn {
            background: var(--primary);
            color: black;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            font-weight: bold;
        }
        .watch-btn:disabled { opacity: 0.5; cursor: not-allowed; }

        /* --- Ø²Ø± Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ Ø§Ù„Ø¸Ø§Ù‡Ø± --- */
        #support-float-btn {
            position: fixed;
            bottom: 20px; 
            right: 20px;
            background: linear-gradient(45deg, var(--secondary), #a29bfe);
            color: white;
            padding: 12px 25px;
            border-radius: 30px;
            border: none;
            font-size: 16px;
            font-weight: bold;
            box-shadow: 0 5px 20px rgba(108, 92, 231, 0.5);
            z-index: 150;
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            transition: transform 0.2s;
        }
        #support-float-btn:hover {
            transform: scale(1.05);
        }

        /* --- Ø§Ù„Ù†ÙˆØ§ÙØ° Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© --- */
        .modal {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9);
            z-index: 300;
            justify-content: center;
            align-items: center;
        }
        .modal-box {
            background: var(--card);
            width: 90%; max-width: 500px;
            padding: 20px;
            border-radius: 15px;
            border: 1px solid var(--secondary);
            text-align: center;
            max-height: 80vh;
            overflow-y: auto;
        }

        /* --- Ø§Ù„Ø´Ø§Øª --- */
        .chat-container {
            height: 300px;
            background: #1a1a1a;
            border: 1px solid #444;
            border-radius: 10px;
            padding: 10px;
            overflow-y: auto;
            margin-bottom: 10px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .msg { padding: 8px 12px; border-radius: 10px; max-width: 80%; width: fit-content; }
        .msg.user { background: var(--secondary); color: white; align-self: flex-end; border-bottom-left-radius: 0; }
        .msg.admin { background: #444; color: white; align-self: flex-start; border-bottom-right-radius: 0; }
        
        .chat-input-area { display: flex; gap: 10px; }
        .chat-input-area input { flex: 1; padding: 10px; border-radius: 5px; border: none; }

        /* --- Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø¯Ù…Ù† --- */
        #admin-panel {
            background: #000;
            border: 2px solid var(--admin-green);
            background-image: linear-gradient(rgba(0, 255, 0, 0.05) 1px, transparent 1px),
            linear-gradient(90deg, rgba(0, 255, 0, 0.05) 1px, transparent 1px);
            background-size: 20px 20px;
        }
        #admin-panel * { font-family: 'Courier New', monospace; }
        .admin-input { background: #111; border: 1px solid var(--admin-green); color: var(--admin-green); padding: 5px; width: 100%; }
        
        .inbox-list {
            text-align: right;
            border: 1px solid var(--admin-green);
            max-height: 150px;
            overflow-y: auto;
            margin-bottom: 15px;
        }
        .inbox-item {
            padding: 5px;
            border-bottom: 1px solid #333;
            cursor: pointer;
            color: white;
            display: flex;
            justify-content: space-between;
        }
        .inbox-item:hover { background: #111; color: var(--admin-green); }

        /* Ø²Ø± Ø§Ù„Ø£Ø¯Ù…Ù† Ø§Ù„Ù…Ø®ÙÙŠ (ÙŠØ³Ø§Ø± Ø£Ø³ÙÙ„) */
        #hidden-admin-btn {
            position: fixed;
            bottom: 5px; left: 5px;
            width: 30px; height: 30px;
            background: transparent;
            border: none;
            z-index: 200;
        }

    </style>
</head>
<body>

    <!-- Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ù„ÙˆÙŠ -->
    <div class="header">
        <button class="menu-icon" onclick="toggleSidebar()">â˜°</button>
        <div class="user-badge">
            ID: <span id="my-id" onclick="copyId()">--</span> | ğŸ’° <span id="my-coins">0</span>
        </div>
    </div>

    <!-- Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© -->
    <div id="sidebar" class="sidebar">
        <button class="nav-btn" onclick="navTo('home')">ğŸ  Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
        <button class="nav-btn" onclick="navTo('games')">ğŸ® ØµØ§Ù„Ø© Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨</button>
        <button class="nav-btn" onclick="navTo('account')">ğŸ‘¤ Ø´Ø±Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨</button>
        <button class="nav-btn" onclick="navTo('ads')">ğŸ“º ÙƒØ³Ø¨ Ø§Ù„Ø¹Ù…Ù„Ø§Øª</button>
        <!-- Ø²Ø± ØªÙˆØ§ØµÙ„ Ø¯Ø§Ø®Ù„ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø£ÙŠØ¶Ø§Ù‹ -->
        <button class="nav-btn" onclick="openUserChat()" style="color: var(--primary);">ğŸ“ ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§</button>
        <button class="nav-btn" onclick="toggleSidebar()" style="color:var(--accent); margin-top:auto;">Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©</button>
    </div>

    <!-- 1. Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
    <div id="home" class="page show">
        <div style="text-align:center; padding-top:50px;">
            <h1 style="font-size:3em; color:var(--primary)">YOYO WORLD</h1>
            <p>Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø¹Ø§Ù„Ù… Ø§Ù„Ø¬ÙˆØ§Ø¦Ø² ÙˆØ§Ù„ØªØ­Ø¯ÙŠØ§Øª</p>
            <br>
            <button class="play-btn" style="width:200px;" onclick="navTo('games')">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨ Ø§Ù„Ø¢Ù†</button>
        </div>
    </div>

    <!-- 2. ØµÙØ­Ø© Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ -->
    <div id="games" class="page">
        <h2>ğŸ® Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ (ÙƒÙ„ ÙÙˆØ² ÙŠØ²ÙŠØ¯ Ø§Ù„ØµØ¹ÙˆØ¨Ø©)</h2>
        <div class="games-wrapper">
            <!-- Ù„Ø¹Ø¨Ø© 1 -->
            <div class="game-card">
                <div class="info-btn" onclick="showInfo(0)">!</div>
                <h3>ğŸ”¢ Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø°Ù‡Ù†ÙŠ</h3>
                <p>Ù…Ø³ØªÙˆÙ‰: <span id="lvl-0">1</span></p>
                <button class="play-btn" onclick="startGame(0)">Ù„Ø¹Ø¨</button>
            </div>
            <!-- Ù„Ø¹Ø¨Ø© 2 -->
            <div class="game-card">
                <div class="info-btn" onclick="showInfo(1)">!</div>
                <h3>âš¡ Ø³Ø±Ø¹Ø© Ø§Ù„Ø¨Ø±Ù‚</h3>
                <p>Ù…Ø³ØªÙˆÙ‰: <span id="lvl-1">1</span></p>
                <button class="play-btn" onclick="startGame(1)">Ù„Ø¹Ø¨</button>
            </div>
            <!-- Ù„Ø¹Ø¨Ø© 3 -->
            <div class="game-card">
                <div class="info-btn" onclick="showInfo(2)">!</div>
                <h3>ğŸ§  Ø§Ù„Ø°Ø§ÙƒØ±Ø©</h3>
                <p>Ù…Ø³ØªÙˆÙ‰: <span id="lvl-2">1</span></p>
                <button class="play-btn" onclick="startGame(2)">Ù„Ø¹Ø¨</button>
            </div>
            <!-- Ù„Ø¹Ø¨Ø© 4 -->
            <div class="game-card">
                <div class="info-btn" onclick="showInfo(3)">!</div>
                <h3>ğŸ² ÙÙƒ Ø§Ù„ÙƒÙˆØ¯</h3>
                <p>Ù…Ø³ØªÙˆÙ‰: <span id="lvl-3">1</span></p>
                <button class="play-btn" onclick="startGame(3)">Ù„Ø¹Ø¨</button>
            </div>
            <!-- Ù„Ø¹Ø¨Ø© 5 -->
            <div class="game-card">
                <div class="info-btn" onclick="showInfo(4)">!</div>
                <h3>ğŸ”¨ Ø§Ù„Ù…Ø·Ø±Ù‚Ø©</h3>
                <p>Ù…Ø³ØªÙˆÙ‰: <span id="lvl-4">1</span></p>
                <button class="play-btn" onclick="startGame(4)">Ù„Ø¹Ø¨</button>
            </div>
        </div>
    </div>

    <!-- 3. ØµÙØ­Ø© Ø§Ù„Ø­Ø³Ø§Ø¨ -->
    <div id="account" class="page">
        <h2>ğŸ‘¤ Ø§Ù„Ù…ØªØ¬Ø± Ø§Ù„Ø³Ø±ÙŠ</h2>
        <div id="acc-locked" style="text-align:center; padding:30px; background:var(--card); border-radius:10px;">
            <h3>Ø­Ø³Ø§Ø¨ Ø§Ù„Ù€ VIP</h3>
            <p>Ø§Ù„Ø³Ø¹Ø±: <strong>10,000</strong> Ø¹Ù…Ù„Ø©</p>
            <button class="play-btn" style="background:var(--primary); color:black;" onclick="buyAccount()">Ø´Ø±Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨</button>
        </div>
        <div id="acc-unlocked" class="account-details">
            <div class="anti-screenshot">CONFIDENTIAL</div>
            <h3 style="color:var(--secondary)">Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø³Ø§Ø¨ (Ø³Ø±ÙŠ Ù„Ù„ØºØ§ÙŠØ©)</h3>
            <p>Ø§Ù„Ø¨Ø±ÙŠØ¯: <strong style="background:#333; color:white; padding:5px;">yoyo@gmail.com</strong></p>
            <p>ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±: <strong style="background:#333; color:white; padding:5px;">0595053427Aa</strong></p>
            <p style="color:red; font-size:12px;">ØªØ­Ø°ÙŠØ±: Ù„Ø§ ØªØ­Ø§ÙˆÙ„ Ø§Ù„ØªØµÙˆÙŠØ±. Ø§Ù„Ù†Ø¸Ø§Ù… ÙŠØ­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹.</p>
        </div>
    </div>

    <!-- 4. ØµÙØ­Ø© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª -->
    <div id="ads" class="page">
        <h2>ğŸ“º Ø´Ø§Ù‡Ø¯ ÙˆØ§Ø±Ø¨Ø­</h2>
        <div id="ad-timer" style="display:none; text-align:center; background:var(--primary); padding:10px; color:black; margin-bottom:10px;">
            Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø©... <span id="timer-val">0</span> Ø«Ø§Ù†ÙŠØ©
        </div>
        <div class="ad-item"><span>ÙÙŠØ¯ÙŠÙˆ Ù‚ØµÙŠØ± (30 Ø«)</span><button class="watch-btn" onclick="watchAd(30, 25)">+25 ğŸ’°</button></div>
        <div class="ad-item"><span>ÙÙŠØ¯ÙŠÙˆ Ø¹Ø§Ø¯ÙŠ (35 Ø«)</span><button class="watch-btn" onclick="watchAd(35, 35)">+35 ğŸ’°</button></div>
        <div class="ad-item"><span>ÙÙŠØ¯ÙŠÙˆ Ø·ÙˆÙŠÙ„ (40 Ø«)</span><button class="watch-btn" onclick="watchAd(40, 50)">+50 ğŸ’°</button></div>
        <div class="ad-item"><span>Ø¥Ø¹Ù„Ø§Ù† Ø°Ù‡Ø¨ÙŠ (50 Ø«)</span><button class="watch-btn" onclick="watchAd(50, 70)">+70 ğŸ’°</button></div>
        <div class="ad-item"><span>Ù…ÙŠØ¬Ø§ Ø¨Ø§Ù‚Ø© (80 Ø«)</span><button class="watch-btn" onclick="watchAd(80, 120)">+120 ğŸ’°</button></div>
    </div>

    <!-- Ø²Ø± Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ Ø§Ù„Ø¸Ø§Ù‡Ø± -->
    <button id="support-float-btn" onclick="openUserChat()">
        ğŸ’¬ Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ
    </button>

    <!-- Ù†Ø§ÙØ°Ø© Ø§Ù„Ø´Ø§Øª (Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…) -->
    <div id="user-chat-modal" class="modal">
        <div class="modal-box">
            <h3>ğŸ’¬ ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ</h3>
            <div id="user-chat-box" class="chat-container"></div>
            <div class="chat-input-area">
                <input type="text" id="user-msg-in" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ...">
                <button class="watch-btn" onclick="sendUserMsg()">Ø¥Ø±Ø³Ø§Ù„</button>
            </div>
            <br>
            <button class="nav-btn" style="color:red; width:100%; text-align:center;" onclick="closeModals()">Ø¥ØºÙ„Ø§Ù‚</button>
        </div>
    </div>

    <!-- Ù†Ø§ÙØ°Ø© Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù„Ø¹Ø¨Ø© -->
    <div id="info-modal" class="modal">
        <div class="modal-box">
            <h3 id="info-title"></h3>
            <p id="info-desc"></p>
            <p>Ø§Ù„Ø¬Ø§Ø¦Ø²Ø©: <span id="info-reward" style="color:var(--primary)"></span></p>
            <button class="watch-btn" onclick="closeModals()">Ø­Ø³Ù†Ø§Ù‹</button>
        </div>
    </div>

    <!-- Ù†Ø§ÙØ°Ø© Ø§Ù„Ù„Ø¹Ø¨ -->
    <div id="game-modal" class="modal">
        <div class="modal-box" style="border-color:white;">
            <div id="game-area"></div>
            <br>
            <button class="nav-btn" style="color:red; width:100%; text-align:center;" onclick="closeModals()">Ø§Ø³ØªØ³Ù„Ø§Ù…</button>
        </div>
    </div>

    <!-- Ø²Ø± Ø§Ù„Ø£Ø¯Ù…Ù† Ø§Ù„Ù…Ø®ÙÙŠ -->
    <button id="hidden-admin-btn" onclick="openAdminLogin()"></button>

    <!-- ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø£Ø¯Ù…Ù† -->
    <div id="admin-login" class="modal">
        <div class="modal-box" style="background:black; border-color:var(--admin-green);">
            <h3 style="color:var(--admin-green)">ACCESS SYSTEM</h3>
            <input type="password" id="adm-pass" class="admin-input" placeholder="Password">
            <br><br>
            <button class="watch-btn" style="background:var(--admin-green);" onclick="checkAdmin()">LOGIN</button>
        </div>
    </div>

    <!-- Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ø£Ø¯Ù…Ù† -->
    <div id="admin-panel-modal" class="modal">
        <div id="admin-panel" class="modal-box" style="width:95%; max-width:700px; text-align:left;">
            <h2 style="text-align:center">ADMIN TERMINAL v2.0</h2>
            
            <label style="color:var(--admin-green)">[INBOX] Active Chats:</label>
            <div id="inbox-list" class="inbox-list"></div>

            <div style="border:1px dashed var(--admin-green); padding:10px; margin-bottom:10px;">
                <label style="color:var(--admin-green)">Target ID:</label>
                <input type="text" id="target-id" class="admin-input" placeholder="Select from list or paste ID">
                <button onclick="fetchUserData()" style="margin-top:5px; background:var(--admin-green); border:none; padding:5px;">FETCH DATA</button>
                
                <div id="admin-data-display" style="display:none; margin-top:10px; color:white;">
                    <p>Coins: <span id="adm-coins">0</span> | Tasks: <span id="adm-tasks">0</span></p>
                    <label style="color:var(--admin-green)">Modify Coins:</label>
                    <input type="number" id="adm-amt" class="admin-input" style="width:100px;">
                    <button onclick="modCoins(1)" style="background:green; color:white; border:none; padding:5px;">[+]</button>
                    <button onclick="modCoins(-1)" style="background:red; color:white; border:none; padding:5px;">[-]</button>
                    <hr style="border-color:#333;">
                    <label style="color:var(--admin-green)">Chat with User:</label>
                    <div id="admin-chat-box" class="chat-container" style="height:150px; background:#111;"></div>
                    <div class="chat-input-area">
                        <input type="text" id="admin-msg-in" class="admin-input" placeholder="Reply...">
                        <button onclick="sendAdminMsg()" style="background:var(--admin-green); border:none; padding:5px;">SEND</button>
                    </div>
                </div>
            </div>
            <button onclick="closeModals()" style="background:transparent; border:1px solid var(--admin-green); color:var(--admin-green);">LOGOUT</button>
        </div>
    </div>

    <script>
        // --- Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ---
        let user = {
            id: localStorage.getItem('yoyo_id') || 'ID-' + Math.floor(100000 + Math.random() * 900000),
            coins: parseInt(localStorage.getItem('yoyo_coins')) || 0,
            bought: localStorage.getItem('yoyo_bought') === 'true',
            levels: JSON.parse(localStorage.getItem('yoyo_levels')) || [1,1,1,1,1],
            tasks: parseInt(localStorage.getItem('yoyo_tasks')) || 0,
            chat: JSON.parse(localStorage.getItem('yoyo_chat')) || []
        };

        if(!localStorage.getItem('yoyo_id')) localStorage.setItem('yoyo_id', user.id);

        function saveData() {
            localStorage.setItem('yoyo_coins', user.coins);
            localStorage.setItem('yoyo_bought', user.bought);
            localStorage.setItem('yoyo_levels', JSON.stringify(user.levels));
            localStorage.setItem('yoyo_tasks', user.tasks);
            localStorage.setItem('yoyo_chat', JSON.stringify(user.chat));
            updateUI();
        }

        function updateUI() {
            document.getElementById('my-id').innerText = user.id;
            document.getElementById('my-coins').innerText = user.coins;
            for(let i=0; i<5; i++) document.getElementById(`lvl-${i}`).innerText = user.levels[i];
            
            if(user.bought) {
                document.getElementById('acc-locked').style.display = 'none';
                document.getElementById('acc-unlocked').style.display = 'block';
            }
        }

        function copyId() { navigator.clipboard.writeText(user.id); alert("ØªÙ… Ù†Ø³Ø® ID"); }

        // --- Ø§Ù„ØªÙ†Ù‚Ù„ ---
        function toggleSidebar() { document.getElementById('sidebar').classList.toggle('active'); }
        function navTo(pageId) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('show'));
            document.getElementById(pageId).classList.add('show');
            document.getElementById('sidebar').classList.remove('active');
            window.scrollTo(0,0);
        }
        function closeModals() {
            document.querySelectorAll('.modal').forEach(m => m.style.display = 'none');
            if(gameTimer) clearInterval(gameTimer);
        }

        // --- Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ ---
        const gamesData = [
            {t:"Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø°Ù‡Ù†ÙŠ", d:"Ø­Ù„ Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø© Ù‚Ø¨Ù„ Ù†ÙØ§Ø° Ø§Ù„ÙˆÙ‚Øª", r:20},
            {t:"Ø³Ø±Ø¹Ø© Ø§Ù„Ø¨Ø±Ù‚", d:"Ø§Ø¶ØºØ· Ø¹Ù†Ø¯Ù…Ø§ ÙŠØªØ­ÙˆÙ„ Ø§Ù„Ù„ÙˆÙ† Ù„Ù„Ø£Ø®Ø¶Ø±", r:25},
            {t:"Ø§Ù„Ø°Ø§ÙƒØ±Ø©", d:"Ø§Ø­ÙØ¸ Ø§Ù„Ø±Ù‚Ù… Ø«Ù… Ø§ÙƒØªØ¨Ù‡", r:30},
            {t:"ÙÙƒ Ø§Ù„ÙƒÙˆØ¯", d:"Ø®Ù…Ù† Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ (Ø³Ù†Ø³Ø§Ø¹Ø¯Ùƒ)", r:35},
            {t:"Ø§Ù„Ù…Ø·Ø±Ù‚Ø©", d:"Ø§Ø¶ØºØ· Ø§Ù„Ø²Ø± 15 Ù…Ø±Ø© Ø¨Ø³Ø±Ø¹Ø©", r:40}
        ];

        function showInfo(i) {
            let l = user.levels[i];
            document.getElementById('info-title').innerText = gamesData[i].t;
            document.getElementById('info-desc').innerText = gamesData[i].d;
            document.getElementById('info-reward').innerText = gamesData[i].r * l;
            document.getElementById('info-modal').style.display = 'flex';
        }

        let gameTimer, currGame;

        function startGame(idx) {
            currGame = idx;
            let l = user.levels[idx];
            let area = document.getElementById('game-area');
            area.innerHTML = '';
            document.getElementById('game-modal').style.display = 'flex';

            if(idx===0) { // Ø±ÙŠØ§Ø¶ÙŠØ§Øª
                let n1=Math.floor(Math.random()*10*l), n2=Math.floor(Math.random()*10*l);
                area.innerHTML=`<h3>${n1} + ${n2} = ?</h3><input type='number' id='ans' style='padding:10px'><button class='play-btn' onclick='check(${n1+n2})'>ØªØ­Ù‚Ù‚</button>`;
            } else if(idx===1) { // Ø±Ø¯ ÙØ¹Ù„
                area.innerHTML=`<div id='react-box' style='width:100px;height:100px;background:red;margin:auto;border-radius:50%;display:flex;align-items:center;justify-content:center'>Ø§Ù†ØªØ¸Ø±</div>`;
                let box=document.getElementById('react-box');
                let start=0;
                setTimeout(()=>{
                    if(document.getElementById('game-modal').style.display=='flex'){
                        box.style.background='#0f0'; box.innerText='Ø§Ø¶ØºØ·!'; start=Date.now();
                        box.onclick=()=>{
                            if(Date.now()-start < (1000-(l*50))) win(idx); else {alert('Ø¨Ø·ÙŠØ¡!'); closeModals();}
                        }
                    }
                }, 1000+Math.random()*2000);
            } else if(idx===2) { // Ø°Ø§ÙƒØ±Ø©
                let n=Math.floor(Math.random()*Math.pow(10,l+2));
                area.innerHTML=`<h3>Ø§Ø­ÙØ¸: ${n}</h3>`;
                setTimeout(()=>{ area.innerHTML=`<input type='number' id='ans'><button class='play-btn' onclick='check(${n})'>ØªØ­Ù‚Ù‚</button>`; },2000);
            } else if(idx===3) { // ØªØ®Ù…ÙŠÙ†
                let t=Math.floor(Math.random()*(10*l))+1;
                area.innerHTML=`<h3>Ø®Ù…Ù† (1-${10*l})</h3><input type='number' id='ans'><button class='play-btn' onclick='guess(${t})'>Ø®Ù…Ù†</button><p id='hint'></p>`;
            } else if(idx===4) { // Ù†Ù‚Ø±
                let c=0, req=15+(l*3);
                area.innerHTML=`<h3>Ø§Ø¶ØºØ· ${req} Ù…Ø±Ø§Øª</h3><button id='c-btn' style='font-size:30px;padding:10px;border-radius:50%'>0</button>`;
                document.getElementById('c-btn').onclick=function(){ c++; this.innerText=c; if(c>=req) win(idx); };
            }
        }

        function check(v) { if(parseInt(document.getElementById('ans').value)===v) win(currGame); else {alert('Ø®Ø·Ø£'); closeModals();} }
        function guess(t) { 
            let v=parseInt(document.getElementById('ans').value); 
            let h=document.getElementById('hint');
            if(v===t) win(currGame); else h.innerText = v<t ? "Ø£ÙƒØ¨Ø± â¬†ï¸" : "Ø£ØµØºØ± â¬‡ï¸";
        }

        function win(idx) {
            let r = gamesData[idx].r * user.levels[idx];
            user.coins += r; user.levels[idx]++; user.tasks++;
            saveData(); alert(`Ù…Ø¨Ø±ÙˆÙƒ! Ø±Ø¨Ø­Øª ${r}`); closeModals();
        }

        // --- Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª ---
        let watching = false;
        function watchAd(sec, rew) {
            if(watching) { alert('Ø§Ù†ØªØ¸Ø± Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†'); return; }
            watching = true;
            let btns = document.querySelectorAll('.watch-btn'); btns.forEach(b=>b.disabled=true);
            let d = document.getElementById('ad-timer'), v = document.getElementById('timer-val');
            d.style.display='block'; v.innerText=sec;
            let i = setInterval(()=>{
                sec--; v.innerText=sec;
                if(sec<=0) {
                    clearInterval(i); watching=false;
                    user.coins+=rew; user.tasks++; saveData();
                    d.style.display='none'; btns.forEach(b=>b.disabled=false);
                    alert(`Ø­ØµÙ„Øª Ø¹Ù„Ù‰ ${rew}`);
                }
            }, 1000);
        }

        // --- Ø§Ù„Ø­Ø³Ø§Ø¨ ---
        function buyAccount() {
            if(user.coins>=10000) {
                if(confirm('Ø´Ø±Ø§Ø¡ Ø¨Ù€ 10000ØŸ')) { user.coins-=10000; user.bought=true; saveData(); }
            } else alert('Ø±ØµÙŠØ¯ ØºÙŠØ± ÙƒØ§ÙÙŠ');
        }

        // --- Ø§Ù„Ø´Ø§Øª (Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…) ---
        function openUserChat() {
            document.getElementById('user-chat-modal').style.display = 'flex';
            renderChat('user-chat-box', user.chat);
        }
        function sendUserMsg() {
            let txt = document.getElementById('user-msg-in').value;
            if(!txt) return;
            user.chat.push({sender:'user', text:txt});
            saveData();
            document.getElementById('user-msg-in').value = '';
            renderChat('user-chat-box', user.chat);
        }

        // --- Ø§Ù„Ø£Ø¯Ù…Ù† ---
        function openAdminLogin() { document.getElementById('admin-login').style.display = 'flex'; }
        
        function checkAdmin() {
            if(document.getElementById('adm-pass').value === 'yoyo020118') {
                closeModals();
                document.getElementById('admin-panel-modal').style.display = 'flex';
                document.getElementById('adm-pass').value='';
                document.getElementById('admin-data-display').style.display='none';
                loadInbox(); 
            } else alert('Access Denied');
        }

        function loadInbox() {
            let list = document.getElementById('inbox-list');
            list.innerHTML = '';
            // Ù…Ø­Ø§ÙƒØ§Ø©: Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ
            if(user.chat.length > 0) {
                let item = document.createElement('div');
                item.className = 'inbox-item';
                item.innerHTML = `<span>User: ${user.id}</span> <span>(Active)</span>`;
                item.onclick = function() {
                    document.getElementById('target-id').value = user.id;
                    fetchUserData();
                };
                list.appendChild(item);
            } else {
                list.innerHTML = '<div style="padding:5px; color:gray;">No active messages</div>';
            }
        }

        function fetchUserData() {
            let tid = document.getElementById('target-id').value.trim();
            if(tid === user.id) {
                document.getElementById('admin-data-display').style.display = 'block';
                document.getElementById('adm-coins').innerText = user.coins;
                document.getElementById('adm-tasks').innerText = user.tasks;
                renderChat('admin-chat-box', user.chat);
            } else {
                alert('User not found (Try your own ID).');
            }
        }

        function modCoins(dir) {
            let amt = parseInt(document.getElementById('adm-amt').value);
            if(amt) {
                user.coins += (amt*dir); if(user.coins<0) user.coins=0;
                saveData();
                document.getElementById('adm-coins').innerText = user.coins;
                alert('Updated');
            }
        }

        function sendAdminMsg() {
            let txt = document.getElementById('admin-msg-in').value;
            if(!txt) return;
            user.chat.push({sender:'admin', text:txt});
            saveData();
            document.getElementById('admin-msg-in').value='';
            renderChat('admin-chat-box', user.chat);
        }

        function renderChat(elId, chatData) {
            let box = document.getElementById(elId);
            box.innerHTML = '';
            chatData.forEach(msg => {
                let d = document.createElement('div');
                d.className = `msg ${msg.sender}`;
                d.innerText = msg.text;
                box.appendChild(d);
            });
            box.scrollTop = box.scrollHeight;
        }

        updateUI();

    </script>
</body>
</html>
